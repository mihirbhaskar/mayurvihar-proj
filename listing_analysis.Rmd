---
title: "Listing Analysis"
author: "Mihir Bhaskar"
date: "26/07/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

if (!require("pacman")) install.packages("pacman") # Pacman package has easy load functions (e.g. installs package and then loads if not available)
pacman::p_load(tidyverse, here, stringr, rgdal, leaflet, RColorBrewer)

# set up paths relative to User's Dropbox
if (Sys.info()[["user"]] == "Mihir_Bhaskar") dbpath <- "D:/"
if (Sys.info()[["user"]] == "Sohaib Nasim") dbpath <- "C:/Users/Sohaib/"

base <- paste0(dbpath,"Dropbox/Mayur Vihar Project/")

# Import cleaned master data
listing <- as.data.frame(read.csv(paste0(raw,'full_master_data.csv')))

# Create simple tab function
tab <- function(x, y){
  
  y <- enquo(y)
  
  x %>% group_by(!!y) %>% summarise(n = n()) %>%
    
    mutate(percent = round((n/sum(n)), 3)) %>% arrange(desc(n))
  
}


```

## Demographics

```{r basic}

# Number of people per block
tab(raw, block) %>% kable(format.args = list(big.mark = ","), digits = 2, caption = "Number of households per block") %>%
  kable_styling('striped')

# HH Lat-longs shown on map


```

